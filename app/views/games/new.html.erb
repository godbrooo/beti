<div class="container">
  <br>
  <div class="row">
    <div class="col-xs-12 col-sm-4 col-sm-offset-4 ">
      <%# @game.video %>

      <%= simple_form_for(@game) do |f| %>
      <%= f.input :title,
           label: 'Titre du pari entre ami',
           placeholder: 'Je gagne aux flechettes',
           input_html:{class:'my_input'},
           required: false
           %>

      <%= f.input :photo,
            label: 'Ajouter une photo',
            input_html:{class:'my_input'}
            %>


      <%= f.input :description,
      placeholder: 'Qui, quand, comment',

      input_html:{class:'my_input'}%>
      <%= f.input :price,
      label: 'Mise par personne',
      placeholder: '2€',
      input_html:{class:'my_input'}%>

      <div class="form-group">
        <input type="checkbox" id="deadline-checkbox" onclick="showDeadline()"> Programmer une fin de pari
      </div>
      <div class="hidden" id="deadline">
        <%= f.input :dead_line,
        label: 'Date de fin de pari',
        input_html: {class:'my_input'},
        html5: true%>
      </div>

      <%# f.input :betyers,
      label: "Invitez des Betyers"%>

      <h5>Sélectionner le type de jeu</h5>
      <div class="hidden">
        <%= f.input :category,
             label: 'Type de jeu',
             collection: Game.categories.keys, as: :radio_buttons %>
      </div>
      <div class="row">
        <div class="col-xs-6">
          <%= f.button :button,
          "Le gagnant rafle tout",
          type: :submit, id: "winner",
          class: :'btn-box'
            %>

         <!--  <%# f.input :custom_field, :status => true do
         check_box_tag (:status, value = 0)%> -->

          </div>
          <div class="col-xs-6">
            <%= f.button :button,
            "Les gains sont redistribués par classement",
            type: :submit, id: "ranking",
            class: :'btn-box' %>

    <!--        <%# f.input :custom_field, :status => true do
          check_box_tag (:status, value = 1)%> -->

          </div>
        </div>
        <p class="hidden" id="explication">"Le ou les gagnants se partage(-ent) les gains de façon équivalente"</p>
        <div class="hidden" id="calcul">
          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">Ranking</th>
                <th scope="col">Pseudo</th>
                <th scope="col">Prize</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Josi</td>
                <td>50%</td>
              </tr>
              <tr>
                <th scope="row">2</th>
                <td>Clémentino</td>
                <td>30%</td>
              </tr>
              <tr>
                <th scope="row">3</th>
                <td>Gui-Toinou</td>
                <td>20%</td>
              </tr>
            </tbody>
          </table>
          <p>Exemple de répartition pour une mise totale de 25€ pour 3 gagnants Betyers: </p>
        </div>

          <br>

        <div class="row" align=center>
          <%= f.button :button,
          "Lancer le pari",
          type: :submit,
          class: :'btn btn-bety-red btn-new-form '%>
         </div>

         <% end %>

       </div>
     </div>

   </div>


<script>
  function showDeadline() {
    var checkBox = document.getElementById("deadline-checkbox");
    var input = document.getElementById("deadline");
    if (checkBox.checked == true){
      input.classList.remove("hidden");
    } else {
     input.classList.add("hidden");
   }
 }
 var radiowinner= document.getElementById("game_category_winner")
 var radioranking= document.getElementById("game_category_ranking")
 var winnerBtn = document.getElementById("winner");
 var winnerBtnExplainations = document.getElementById("explication");

 var rankingBtn = document.getElementById("ranking");
 var simulation = document.getElementById("calcul");

 winnerBtn.addEventListener("click", function (event) {
    event.preventDefault();

    if (!simulation.classList.contains('hidden')) {
      simulation.classList.add('hidden');
    }

    if (rankingBtn.classList.contains('btn-box-click')) {
      rankingBtn.classList.remove('btn-box-click');
      rankingBtn.classList.add('btn-box');
    }

    winnerBtnExplainations.classList.toggle("hidden");

    winnerBtn.classList.toggle("btn-box");
    winnerBtn.classList.toggle("btn-box-click");
    radiowinner.checked = true;
  });

rankingBtn.addEventListener("click", function (event) {
    event.preventDefault();

    if (!winnerBtnExplainations.classList.contains('hidden')) {
      winnerBtnExplainations.classList.add('hidden');
    }

    if (winnerBtn.classList.contains('btn-box-click')) {
      winnerBtn.classList.remove('btn-box-click');
      winnerBtn.classList.add('btn-box');
    }

    simulation.classList.toggle("hidden");

    rankingBtn.classList.toggle("btn-box");
    rankingBtn.classList.toggle("btn-box-click");
    radioranking.checked = true;


    var y = window.innerHeight;
    window.scroll({top: y, behavior: "smooth"});


  });


</script>




